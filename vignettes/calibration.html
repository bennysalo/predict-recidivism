<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Vignette Author" />

<meta name="date" content="2018-04-23" />

<title>Vignette Title</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Vignette Title</h1>
<h4 class="author"><em>Vignette Author</em></h4>
<h4 class="date"><em>2018-04-23</em></h4>



<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())
devtools<span class="op">::</span><span class="kw">load_all</span>(<span class="st">&quot;.&quot;</span>)
<span class="co">#&gt; Loading recidivismsl</span>
<span class="kw">library</span>(tidyverse)
<span class="co">#&gt; -- Attaching packages --------------------</span>
<span class="co">#&gt; v ggplot2 2.2.1     v purrr   0.2.4</span>
<span class="co">#&gt; v tibble  1.4.2     v dplyr   0.7.4</span>
<span class="co">#&gt; v tidyr   0.8.0     v stringr 1.3.0</span>
<span class="co">#&gt; v readr   1.1.1     v forcats 0.3.0</span>
<span class="co">#&gt; -- Conflicts ---- tidyverse_conflicts() --</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></code></pre></div>
<p>Calculating expected and observed outcomes by quintile will be facilitated by having a separate data frame for each model including the estimated probabilities, corresponding quintile, and pertinent outcome.</p>
<p>We start by making a list vectors of estimated probabilities that we then turn to a list of data frames - at this point with a single column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gen_models &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_subset</span>(<span class="kw">names</span>(test_set_predictions), <span class="st">&quot;^gen_&quot;</span>)
vio_models &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_subset</span>(<span class="kw">names</span>(test_set_predictions), <span class="st">&quot;^vio_&quot;</span>)

model_df_list &lt;-<span class="st"> </span><span class="kw">as.list</span>(test_set_predictions[<span class="kw">c</span>(gen_models, vio_models)])

model_df_list &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(model_df_list, 
                               <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">prediction =</span> .x))</code></pre></div>
<p>For each data frame we add a column with the corresponding quintile</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Function to use</span>
make_quintiles &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  quint_breaks &lt;-<span class="st"> </span>(<span class="kw">quantile</span>(x, <span class="dt">probs =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)))
  quintiles    &lt;-<span class="st"> </span><span class="kw">cut</span>(x, 
                      <span class="dt">breaks =</span> quint_breaks, 
                      <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>, 
                      <span class="dt">labels =</span> <span class="ot">FALSE</span>)
  <span class="kw">return</span>(quintiles)
}

model_df_list &lt;-<span class="st"> </span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">map</span>(<span class="dt">.x =</span> model_df_list,
             <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">mutate</span>(.x, <span class="dt">quintile =</span> <span class="kw">make_quintiles</span>(prediction)))</code></pre></div>
<p>We the add the pertinent outcome variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Split into seperate lists for general and violent recidivism</span>
model_df_list_gen &lt;-<span class="st"> </span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">map</span>(<span class="dt">.x =</span> model_df_list[gen_models],
             <span class="dt">.f =</span> <span class="op">~</span><span class="kw">cbind</span>(.x, <span class="dt">outcome =</span> test_set_predictions<span class="op">$</span>reoffenceThisTerm))

model_df_list_vio &lt;-<span class="st"> </span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">map</span>(<span class="dt">.x =</span> model_df_list[vio_models],
             <span class="dt">.f =</span> <span class="op">~</span><span class="kw">cbind</span>(.x, <span class="dt">outcome =</span> test_set_predictions<span class="op">$</span>newO_violent))

<span class="co"># Combine back</span>
model_df_list &lt;-<span class="st"> </span><span class="kw">c</span>(model_df_list_gen, model_df_list_vio)</code></pre></div>
<p>Assertions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(assertthat)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'assertthat'</span>
<span class="co">#&gt; The following object is masked from 'package:tibble':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     has_name</span>
<span class="co"># All data frames have 3 colmns</span>
<span class="kw">assert_that</span>(<span class="kw">all</span>(purrr<span class="op">::</span><span class="kw">map</span>(model_df_list, length) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>))
<span class="co">#&gt; [1] TRUE</span>
<span class="co"># All models are included (and nothing else)</span>
<span class="kw">assert_that</span>(<span class="kw">all</span>(<span class="kw">sort</span>(<span class="kw">c</span>(vio_models, gen_models)) <span class="op">==</span><span class="st"> </span>
<span class="st">                  </span><span class="kw">sort</span>(<span class="kw">names</span>(model_df_list))))
<span class="co">#&gt; [1] TRUE</span>
<span class="co"># Columns in data frame have the expected names</span>
list_of_column_names &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(model_df_list, names)
<span class="kw">assert_that</span>(<span class="kw">all</span>(
  purrr<span class="op">::</span><span class="kw">map_lgl</span>(<span class="dt">.x =</span> list_of_column_names,
                 <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">identical</span>(.x, <span class="kw">c</span>(<span class="st">&quot;prediction&quot;</span>, <span class="st">&quot;quintile&quot;</span>, <span class="st">&quot;outcome&quot;</span>)))
  ))
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>For each data frame we calculate the expected and observed recidivism rates. We get a list of data frames with 5 rows (one per quintile) and three columns (quintile, observed rate and expected rate.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Function to use. </span>
get_rates_per_bin &lt;-<span class="st"> </span><span class="cf">function</span>(model_data_frame) {
  model_data_frame <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">group_by</span>(quintile) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(),                              <span class="co"># n in quintile</span>
              <span class="dt">obs =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(outcome) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>),  <span class="co"># number of reoffences</span>
              <span class="dt">obs_rate =</span> obs<span class="op">/</span>n <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,               <span class="co"># observed rate</span>
              <span class="dt">exp_rate =</span> <span class="kw">mean</span>(prediction)<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># expected rate</span>
<span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>n, <span class="op">-</span>obs)   <span class="co"># remove intermediate steps</span>
}

calibration_list &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(model_df_list, get_rates_per_bin)</code></pre></div>
<p>Now we bind together all the data frames and create an identifying label with the model name. This results in a data frame with four columns and 24 models x 5 quintiles = 120 rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">calibration_dframe &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(calibration_list, <span class="dt">.id =</span> <span class="st">&quot;model_name&quot;</span>)

<span class="kw">assert_that</span>(<span class="kw">ncol</span>(calibration_dframe) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)
<span class="co">#&gt; [1] TRUE</span>
<span class="kw">assert_that</span>(<span class="kw">nrow</span>(calibration_dframe) <span class="op">==</span><span class="st"> </span><span class="dv">120</span>)
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>We also want the descriptions of the models that we can take from <code>model_grid</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model_desc &lt;-<span class="st"> </span>model_grid[<span class="kw">c</span>(<span class="st">&quot;model_name&quot;</span>, <span class="st">&quot;outcome&quot;</span>, <span class="st">&quot;predictors&quot;</span>, <span class="st">&quot;model_type&quot;</span>)]
calibration_dframe &lt;-<span class="st"> </span><span class="kw">left_join</span>(calibration_dframe, model_desc, <span class="dt">by =</span> <span class="st">&quot;model_name&quot;</span>)</code></pre></div>
<p>With this we can make a plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

calibration_plot &lt;-
calibration_dframe <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(predictors <span class="op">!=</span><span class="st"> &quot;All including term&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> exp_rate, <span class="dt">y =</span> obs_rate, <span class="dt">group =</span> predictors)) <span class="op">+</span>
<span class="st">  </span><span class="co"># geom_line(aes(lty = predictors), alpha = 0.5) +</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> predictors)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_abline</span>() <span class="op">+</span>
<span class="st">  </span><span class="co"># scale_linetype(name   = &quot;Predictor set&quot;) +</span>
<span class="st">  </span><span class="kw">scale_shape_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">17</span>),
                     <span class="dt">name   =</span> <span class="st">&quot;Predictor set&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(outcome <span class="op">~</span><span class="st"> </span>model_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Observed recidivism rate in quintile&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Expected probability of recidivism in quintile&quot;</span>) <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_tufte</span>(<span class="dt">base_family =</span> <span class="st">&quot;sans&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)
  

  calibration_plot</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">saveRDS</span>(calibration_plot, <span class="st">&quot;C:/Users/benny_000/Dropbox/AAAKTUELLT/Manuskript 2/calibration_plot.rds&quot;</span>)</code></pre></div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
