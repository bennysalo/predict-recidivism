---
title: "Training logistic regression models"
author: "Benny Salo"
date: "2018-04-12"
output: github_document
---

```{r message=FALSE, warning=FALSE}
devtools::wd()
training_set <- readRDS("not_public/training_set.rds")
```

```{r}
library(dplyr)
glm_grid <- model_grid %>% filter(model_type == "Logistic regression")
```


```{r}

start <- Sys.time()

glm_grid$train_result <- purrr::map2(
  .x = glm_grid$rhs,
  .y = glm_grid$lhs,
  .f = ~ caret::train(
    x         = training_set[.x],
    y         = training_set[[.y]],
    family    = "binomial",
    metric    = "ROC",
    trControl = ctrl_fun_training
    )
  )

Sys.time() - start


```

```{r}
train_mods_glm <- map(train_mods_glm, strip_data)
names(train_mods_glm) <- glm_grid$model_name
saveRDS(train_mods_glm, file = "train_mods_glm.rds")
rm(train_mods_glm)
```

